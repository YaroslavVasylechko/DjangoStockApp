{% extends 'base.html' %}

{% block title %}
Get firm info
{% endblock %}

{% block left_title %}

<div class="alert alert-success" role="alert">
    <h4 class="alert-heading">/Get historical values/</h4>
    <p>Get close prices values of company.</p>
    <hr>
    <p class="mb-0">Select the firm name, and then enter dates in the fields below to get a table of closing price
        values.</p>
</div>


{% endblock %}

{% block content %}
<h3 align="center">Please, enter data in fields bellow.</h3>
<div class="alert alert-warning alert-dismissible fade show" role="alert">
    <strong>Be careful: </strong> accepted date format is "YYYY-mm-dd".
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>

<form action="" method="POST">

    {% csrf_token %}
    {{ form.as_p }}

    <input type="Submit" name="submit" value="Submit" class="btn btn-primary"/>
</form>
{% if submitbutton == "Submit" and valid_data == True %}

<table class="table">
    <thead class="table table-striped">
    <h1 align="center">{{ firm }}</h1>
    <h3 align="center">All data from <a href="https://stooq.pl/" class="link-dark">stooq.pl</a></h3>
    <tr>
        <th scope="col">Close Price</th>
        <th scope="col">Date</th>
    </tr>
    </thead>
    <tbody>
    {% for el in firm_data %}

    <tr>
        <td>{{ el.price }}</td>
        <td>{{ el.date }}</td>
    </tr>

    {% endfor %}
    </tbody>
</table>

{% elif submitbutton == "Submit" and valid_data == False %}
<br>
<div class="alert alert-danger" role="alert">
    You entered incorrect data, please try again.
</div>

{% endif %}
{% endblock %}

{% block content-center %}

{% endblock %}